# 정규화

관계형 데이터 모델에서 중복을 줄이고 이상현상을 방지하기 위해 정규형(NF)을 적용한다.

## 1정규형 (1NF)
- 모든 속성은 원자값만 가진다 (반복 컬럼 X, 배열 X).
- 예) `phones` 배열을 분리해 `customer_phone` 테이블(`customer_id`, `phone_number`)을 만든다.

## 2정규형 (2NF)
- 1NF를 만족하면서, 부분 함수 종속을 제거 (복합 기본키의 일부에만 의존하는 컬럼 제거).
- 예) `order_item(order_id, product_id, product_name, price)` 에서 `product_name` 은 `product_id` 에만 의존하므로 `product` 테이블로 분리.

## 3정규형 (3NF)
- 2NF를 만족하면서, 이행적 종속(키가 아닌 속성이 또 다른 키가 아닌 속성에 의존)을 제거.
- 예) `employee(employee_id, dept_id, dept_name)` 에서 `dept_name` 은 `dept_id` 에 의존 → `department` 테이블로 분리.

## 보이스-코드 정규형 (BCNF)
- 모든 결정자가 후보키. 3NF보다 엄격하며, 복합키 간 순환 의존성을 제거한다.
- 예) 코스/강사 배정에서 `course -> instructor`, `instructor -> course` 처럼 상호 결정 관계가 있다면 별도 매핑 테이블 도입.

## 4정규형, 5정규형
- 다치 종속 및 조인 종속을 다루며, 다대다 관계가 반복될 때 중간 테이블을 사용해 분리한다.
- 고급 스키마에서만 필요하며, 무조건 적용하기보다 질의 패턴과 성능을 고려한다.

## 적용 가이드
- CRUD 이상 현상(삽입/갱신/삭제)이 발생하는지 확인하고 필요한 단계까지만 적용한다.
- ORM 매핑 시 정규화된 구조를 유지하되, 조회 성능이 필요한 화면용 뷰나 CQRS 읽기 모델을 별도로 둔다.
- 정규화는 스키마 설계 초기 단계에서 문서화해 팀이 동일한 원칙으로 모델링하도록 한다.
